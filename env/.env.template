# =============================================================================
# VT-AUDIT PRODUCTION ENVIRONMENT CONFIGURATION
# =============================================================================
# Copy this file to .env and customize the values for your production environment
# NEVER commit .env file to version control - it contains sensitive data

# =============================================================================
# DATABASE CONFIGURATION
# =============================================================================

# PostgreSQL database settings
# IMPORTANT: POSTGRES_DB must be "audit" to match init scripts
POSTGRES_DB=audit
POSTGRES_USER=audit
POSTGRES_PASSWORD=CHANGE_ME_DatabasePassword123

# Connection string (update password to match POSTGRES_PASSWORD above)
POSTGRES_DSN=postgres://audit:CHANGE_ME_DatabasePassword123@postgres:5432/audit?sslmode=disable

# Database connection settings
POSTGRES_HOST=postgres
POSTGRES_PORT=5432
POSTGRES_SSLMODE=disable

# =============================================================================
# KEYCLOAK AUTHENTICATION
# =============================================================================

# Keycloak database settings
# IMPORTANT: KEYCLOAK_DB must be "audit" (same as POSTGRES_DB)
# IMPORTANT: KEYCLOAK_DB_PASSWORD must be "ChangeMe123!" to match 20_grants.sql
KEYCLOAK_DB=audit
KEYCLOAK_DB_USER=keycloak
KEYCLOAK_DB_PASSWORD=ChangeMe123!

# Keycloak admin credentials (change these for production!)
KEYCLOAK_ADMIN=admin
KEYCLOAK_ADMIN_PASSWORD=CHANGE_ME_AdminPassword123

# Keycloak realm
KEYCLOAK_REALM=vt-audit

# =============================================================================
# CERTIFICATE AUTHORITY CONFIGURATION
# =============================================================================

# Step-CA configuration
STEPCA_NAME=VT-Audit Certificate Authority

# DNS names for certificates
# IMPORTANT: NO spaces after commas! Each name separated by comma only
# Example: gateway.local,stepca,api-agent,localhost
STEPCA_DNS_NAMES=gateway.local,stepca,api-agent,localhost

# Provisioner configuration
STEPCA_PROVISIONER=bootstrap@vt-audit

# URLs
STEPCA_URL=https://stepca:9000
STEPCA_EXTERNAL_URL=https://gateway.local/step-ca

# Step-CA passwords (change these for production!)
STEPCA_PASSWORD=CHANGE_ME_StepCAPassword123
STEPCA_PROVISIONER_PASSWORD=CHANGE_ME_ProvisionerPassword123

# Step-CA key path
STEPCA_KEY_PATH=/stepca/secrets/provisioner.key

# Certificate validity settings
MTLS_CERT_TTL=24h
CERTIFICATE_VALIDITY_HOURS=24

# =============================================================================
# OAUTH2 / OIDC CONFIGURATION
# =============================================================================

# OAuth2 proxy settings
OIDC_CLIENT_ID=dashboard-proxy

# Client secret (generate with: openssl rand -base64 32)
OIDC_CLIENT_SECRET=CHANGE_ME_generate_with_openssl_rand

# Cookie secret - MUST be exactly 32, 48, or 64 hex characters (16, 24, or 32 bytes)
# Generate with: openssl rand -hex 16  (for 32 chars)
#            or: openssl rand -hex 24  (for 48 chars)
#            or: openssl rand -hex 32  (for 64 chars)
OIDC_COOKIE_SECRET=CHANGE_ME_run_openssl_rand_hex_16

# OIDC issuer and roles
OIDC_ISSUER=https://gateway.local/auth/realms/vt-audit
OIDC_ADMIN_ROLE=admin

# =============================================================================
# AGENT CONFIGURATION
# =============================================================================

# Agent bootstrap token (generate with: openssl rand -base64 32)
AGENT_BOOTSTRAP_TOKEN=CHANGE_ME_generate_bootstrap_token

# =============================================================================
# QUICK SETUP COMMANDS
# =============================================================================
#
# Run these commands to generate secure random values:
#
# PostgreSQL Password:
#   openssl rand -base64 24
#
# Keycloak Admin Password:
#   openssl rand -base64 24
#
# Step-CA Passwords:
#   openssl rand -base64 24
#
# OIDC Cookie Secret (32 hex chars):
#   openssl rand -hex 16
#
# OAuth Client Secret:
#   openssl rand -base64 32
#
# Agent Bootstrap Token:
#   openssl rand -base64 32
#
# =============================================================================
