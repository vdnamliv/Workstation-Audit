# =============================================================================# PostgreSQL

# VT-AUDIT PRODUCTION ENVIRONMENT CONFIGURATIONPOSTGRES_USER=audit

# =============================================================================POSTGRES_PASSWORD=change-me

# Copy this file to .env and customize the values for your production environmentPOSTGRES_DB=audit

# NEVER commit .env file to version control - it contains sensitive dataPOSTGRES_DSN=postgres://audit:change-me@postgres:5432/audit?sslmode=disable



# =============================================================================# Keycloak

# CERTIFICATE AUTHORITY CONFIGURATIONKEYCLOAK_DB=audit

# =============================================================================KEYCLOAK_DB_USER=keycloak

KEYCLOAK_DB_PASSWORD=change-me

# Step-CA provisioner password (MUST change for production)KEYCLOAK_ADMIN=admin

# Requirement: Minimum 20 characters, mixed case, numbers, symbolsKEYCLOAK_ADMIN_PASSWORD=change-me

STEPCA_PROVISIONER_PASSWORD=ChangeMe123!SecurePassword2025KEYCLOAK_REALM=vt-audit



# Step-CA configuration# OAuth2 proxy

STEPCA_NAME=VT-Audit Certificate AuthorityOIDC_CLIENT_ID=dashboard-proxy

STEPCA_DNS_NAMES=gateway.local,stepca,api-agent,localhostOIDC_CLIENT_SECRET=replace-with-real-secret

STEPCA_PROVISIONER=bootstrap@vt-audit  OIDC_COOKIE_SECRET=replace-with-32-byte-base64

STEPCA_URL=https://stepca:9000

STEPCA_EXTERNAL_URL=https://gateway.local/step-ca# Step-CA bootstrap

STEPCA_NAME=VT-Audit CA

# Certificate validity settingsSTEPCA_DNS_NAMES=gateway.local,stepca,api-agent

MTLS_CERT_TTL=24hSTEPCA_PROVISIONER=bootstrap@vt-audit

CERTIFICATE_VALIDITY_HOURS=24
STEPCA_PASSWORD=change-me


STEPCA_URL=https://stepca:9000

# =============================================================================STEPCA_EXTERNAL_URL=https://gateway.local/step-ca

# DATABASE CONFIGURATIONSTEPCA_KEY_PATH=/stepca/secrets/provisioner.key

# =============================================================================

# Agent bootstrap

# PostgreSQL database settings (MUST change passwords)MTLS_CERT_TTL=24h

POSTGRES_DB=vtauditAGENT_BOOTSTRAP_TOKEN=set-a-strong-secret

POSTGRES_USER=vtaudit

POSTGRES_PASSWORD=DatabasePassword123!SecureDB2025# OIDC assertions

POSTGRES_DSN=postgres://vtaudit:DatabasePassword123!SecureDB2025@postgres:5432/vtaudit?sslmode=requireOIDC_ISSUER=https://gateway.local/auth/realms/vt-audit

OIDC_ADMIN_ROLE=admin

# Database connection settings
POSTGRES_HOST=postgres
POSTGRES_PORT=5432
POSTGRES_SSLMODE=require

# =============================================================================
# KEYCLOAK AUTHENTICATION
# =============================================================================

# Keycloak admin credentials (MUST change for production)
KEYCLOAK_ADMIN=admin
KEYCLOAK_ADMIN_PASSWORD=KeycloakAdmin123!Secure2025

# Keycloak database settings
KEYCLOAK_DB=vtaudit
KEYCLOAK_DB_USER=keycloak
KEYCLOAK_DB_PASSWORD=KeycloakDB123!Secure2025

# Keycloak realm configuration
KEYCLOAK_REALM=vt-audit

# =============================================================================
# OIDC INTEGRATION
# =============================================================================

# OIDC client configuration
OIDC_CLIENT_ID=dashboard-proxy
OIDC_CLIENT_SECRET=GenerateSecureOIDCClientSecret123!
OIDC_COOKIE_SECRET=GenerateSecure32ByteBase64CookieSecret

# OIDC endpoints
OIDC_ISSUER=https://gateway.local/auth/realms/vt-audit
OIDC_ADMIN_ROLE=admin

# =============================================================================
# AGENT CONFIGURATION  
# =============================================================================

# Agent bootstrap settings
AGENT_BOOTSTRAP_TOKEN=GenerateSecureBootstrapToken123!
DEFAULT_POLLING_INTERVAL=600

# Agent security settings (production requirements)
REQUIRE_MTLS_FOR_AGENTS=true
ALLOW_BYPASS_MODE=false  # NEVER enable in production
AGENT_VERSION_ENFORCEMENT=false

# =============================================================================
# NETWORK AND SECURITY
# =============================================================================

# Primary hostname (customize for your domain)
NGINX_HOST=gateway.your-company.com

# SSL certificate paths
NGINX_SSL_CERT_PATH=/etc/nginx/certs/server.crt
NGINX_SSL_KEY_PATH=/etc/nginx/certs/server.key

# Security tokens (MUST generate secure values)
JWT_SECRET=GenerateSecureJWTSecret32Characters!
ENCRYPTION_KEY=GenerateSecureEncryptionKey32Chars!

# Rate limiting
API_RATE_LIMIT=100  # requests per minute per IP
BOOTSTRAP_RATE_LIMIT=5  # requests per minute per IP

# =============================================================================
# MONITORING AND LOGGING
# =============================================================================

# Logging configuration
LOG_LEVEL=info  # Options: debug, info, warn, error
ENABLE_DEBUG=false  # NEVER enable in production

# Metrics and monitoring
METRICS_ENABLED=true
HEALTH_CHECK_ENABLED=true

# =============================================================================
# PRODUCTION SECURITY CHECKLIST
# =============================================================================
# Before deploying to production, ensure:
#
# 1. ✅ All passwords changed from defaults
# 2. ✅ STEPCA_PROVISIONER_PASSWORD is strong (20+ chars)
# 3. ✅ Database passwords are unique and strong
# 4. ✅ OIDC secrets are properly generated
# 5. ✅ ALLOW_BYPASS_MODE=false
# 6. ✅ ENABLE_DEBUG=false
# 7. ✅ SSL certificates are configured
# 8. ✅ Network firewall rules are in place
# 9. ✅ Backup procedures are established
# 10. ✅ Monitoring and alerting configured

# =============================================================================
# ENVIRONMENT VALIDATION
# =============================================================================
ENVIRONMENT=production
DEPLOYMENT_DATE=2025-10-31
CONFIG_VERSION=2.0